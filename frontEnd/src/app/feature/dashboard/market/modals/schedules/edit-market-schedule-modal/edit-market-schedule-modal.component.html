<div class="modal-header">
  <h5 class="modal-title">Edit</h5>
  <button type="button" class="close" (click)="activeModal.close()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<div class="modal-body dash-modal-body">
  
  <app-loading *ngIf="submitting"></app-loading>

  <div class="row">
    <div class="col-12">    
      <div *ngIf="producerArray.length > 0" class="row">
        <div class="col-8 offset-2">
          <blockquote class="blockquote bq-warning p-0">
            <p class="bq-title pb-0">Please Note:</p>
            <p>This event already has at least one order attached to it. Therefore the settings cannot be modified. If, for some reason you must change the details, you'll need to contact the producers listed below and have them cancel their pickups attached to this event.</p>
          </blockquote>
        </div>
      </div>
    </div>
  </div>

  <div class="row" *ngIf="producerArray.length > 0">
      <div class="col-12">

          <div class="row form-section">
  
              <div class="col-12 form-section-header">
                <h5>Date & Time</h5>
              </div>
      
              <div class="col-12 form-section-body">
      
                <div class="row">
                  <div class="col-xs-12 col-sm-4 col-form-label text-sm-right">
                    <strong>Date:</strong>
                  </div>
                  <div class="col-xs-12 col-sm-8 input-group col-form-value">
                    <p>{{ record.startDateTime | date:'mediumDate' }}</p>
                  </div>
                </div>
      
                <div class="row">
                  <div class="col-xs-12 col-sm-4 col-form-label text-sm-right">
                    <strong>Time:</strong>
                  </div>
                  <div class="col-xs-12 col-sm-8 input-group col-form-value">
                    <p>{{ record.startDateTime | date:'shortTime' }} - {{ record.endDateTime | date:'shortTime' }}</p>
                  </div>
                </div>
      
              </div>
      
            </div>
  
        <div class="row form-section">
  
          <div class="col-12 form-section-header">
            <h5>Details</h5>
          </div>
  
          <div class="col-12 form-section-body">
  
            <div class="row">
              <div class="col-xs-12 col-sm-4 col-form-label text-sm-right">
                <strong>Details:</strong>
              </div>
              <div class="col-xs-12 col-sm-8 input-group col-form-value">
                <p>{{ record.description }}</p>
              </div>
            </div>
  
            <div *ngIf="record.address" class="row">
              <div class="col-xs-12 col-sm-4 col-form-label text-sm-right">
                <strong>Address:</strong>
              </div>
              <div class="col-xs-12 col-sm-8 input-group col-form-value">
                <p>{{ record.address }}</p>
              </div>
            </div>
  
            <div class="row">
              <div class="col-xs-12 col-sm-4 col-form-label text-sm-right">
                <strong>Location:</strong>
              </div>
              <div class="col-xs-12 col-sm-8 input-group col-form-value">
                <p>{{ record.city }}, {{ record.province }}</p>
              </div>
            </div>
  
          </div>
  
        </div>
        
        <div class="row form-section" *ngIf="producerArray.length < 1">
  
    
            <div class="col-12 form-section-body">
              <p>No producers are using this event currently.</p>
    
    
            </div>
    
          </div>
  
        <div class="row form-section" *ngIf="producerArray.length > 0">
  
            <div class="col-12 form-section-header">
              <h5>Producers Using this Event</h5>
            </div>
    
            <div class="col-12 form-section-body">
  
                  <ul class="list-group">
                      <li *ngFor="let producer of producerArray" class="list-group-item">
                        
  
                          <div class=" input-group col-form-value">
                            <p>{{ producer.producerName }}</p>
                          </div>
                        </li>
                        </ul>
    
    
            </div>
    
          </div>
  
      </div>
  </div>
  
  <form *ngIf="!submitting && producerArray < 1" [formGroup]="scheduleForm" (ngSubmit)="onSubmit()">
  
    <div class="row">
    
    <div class="col-12">
      
      <div class="row form-section">
        <div class="col-12 form-section-header">
          <h5>Dates and Times</h5>
        </div>
        
        <div class="col-12 form-section-body">
          
          <!-- Dates -->
          <div class="row">
          
            
            <!-- IF THE SCHED DOES NOT HAVE ORDERS, DATES ARE CHANGEABLE -->
            <div class="col-12">
              
              <!-- DATE - USES DATEPICKER MODULE -->
              <div class="row">
                <label for="date" class="col-4 col-form-label text-right">Date: </label>
                <div class="col-xs-12 col-sm-8 input-group ">
                  <input 
                  [owlDateTime]="date" 
                  [owlDateTimeTrigger]="date" 
                  [(ngModel)]="dateMoment" 
                  [ngModelOptions]="{standalone: true}"
                  [formControl]="scheduleForm.controls['date']"
                  [min]="dateMin"
                  ngDefaultControl>
                  <owl-date-time
                  #date
                  [dateFormat]="'YYYY-MM-DD'"
                  [pickerType]="'calendar'" 
                  [placeHolder]="'YYYY-MM-DD'"
                  [autoClose]="true"
                  [inputId]="'date'"
                  (afterPickerClosed)="onChooseDate()"
                  ></owl-date-time>
                </div>
              </div>
              
              <!-- START TIME - USES DATEPICKER MODULE -->
              <div class="row">
                <label for="startTime" class="col-xs-12 col-sm-4 col-form-label text-sm-right">Start Time:</label>
                <div class="col-xs-12 col-sm-8 input-group ">
                  <input 
                  [owlDateTime]="startTime" 
                  [owlDateTimeTrigger]="startTime" 
                  [(ngModel)]="startTimeMoment" 
                  [ngModelOptions]="{standalone: true}"
                  [formControl]="scheduleForm.controls['startTime']"
                  ngDefaultControl>
                  <owl-date-time
                  #startTime
                  [dateFormat]="'HH:MM'"
                  [pickerType]="'timer'" 
                  [placeHolder]="'HH:MM'"
                  [autoClose]="true"
                  [inputId]="'startTime'"
                  [stepMinute]="15"
                  (afterPickerClosed)="onChooseStartTime()"
                  ></owl-date-time>
                </div>
              </div>
              
              <!-- END TIME - USES DATEPICKER MODULE -->
              <div class="row">
                <label for="endTime" class="col-xs-12 col-sm-4 col-form-label text-sm-right">End Time:</label>
                <div class="col-xs-12 col-sm-8 input-group ">
                  <input 
                  [owlDateTime]="endTime" 
                  [owlDateTimeTrigger]="endTime" 
                  [(ngModel)]="endTimeMoment" 
                  [ngModelOptions]="{standalone: true}"
                  [formControl]="scheduleForm.controls['endTime']"
                  [min]="endTimeMin"
                  ngDefaultControl>
                  <owl-date-time
                  #endTime
                  [dateFormat]="'HH:MM'"
                  [pickerType]="'timer'" 
                  [placeHolder]="'HH:MM'"
                  [autoClose]="true"
                  [inputId]="'endTime'"
                  [stepMinute]="15"
                  (afterPickerClosed)="onChooseEndTime()"
                  ></owl-date-time>
                </div>
              </div>
              
            </div>
            
            <!-- DEADLINE DATE - USES DATEPICKER MODULE -->
            <!-- <div class="col-12">
              
              <div class="row">
                <label for="deadlineDate" class="col-xs-12 col-sm-4 col-form-label text-sm-right">Order Deadline Date:</label>
                <div class="col-xs-12 col-sm-8 input-group ">
                  <input 
                  [owlDateTime]="deadlineDate" 
                  [owlDateTimeTrigger]="deadlineDate" 
                  [(ngModel)]="deadlineDateMoment" 
                  [ngModelOptions]="{standalone: true}"
                  [formControl]="scheduleForm.controls['deadlineDate']"
                  [max]="deadlineDateTimeMax"
                  [min]="deadlineDateTimeMin"
                  ngDefaultControl>
                  <owl-date-time
                  #deadlineDate
                  [dateFormat]="'YYYY-MM-DD'"
                  [pickerType]="'calendar'" 
                  [placeHolder]="'YYYY-MM-DD'"
                  [autoClose]="true"
                  [inputId]="'date'"
                  (afterPickerClosed)="onChooseDeadlineDate()"
                  ></owl-date-time>
                </div>
              </div> -->
              
              <!-- DEADLINE TIME - USES DATEPICKER MODULE -->
              <!-- <div class="row">
                <label for="deadlineTime" class="col-xs-12 col-sm-4 col-form-label text-sm-right">Order Deadline Time:</label>
                <div class="col-xs-12 col-sm-8 input-group ">
                  <input 
                  [owlDateTime]="deadlineTime" 
                  [owlDateTimeTrigger]="deadlineTime" 
                  [(ngModel)]="deadlineTimeMoment" 
                  [ngModelOptions]="{standalone: true}"
                  [formControl]="scheduleForm.controls['deadlineTime']"
                  ngDefaultControl>
                  <owl-date-time
                  #deadlineTime
                  [dateFormat]="'HH:MM'"
                  [pickerType]="'timer'" 
                  [placeHolder]="'HH:MM'"
                  [autoClose]="true"
                  [inputId]="'endTime'"
                  [stepMinute]="15"
                  (afterPickerClosed)="onChooseDeadlineTime()"
                  ></owl-date-time>
                </div>
              </div> -->
              
              
              
            </div>
            
            
          </div>
        </div>
        
        <div class="row form-section">
          <div class="col-12 form-section-header">
            <h5>General Details</h5>
          </div>
          
          <div class="col-12 form-section-body">
            
            <div class="row">
              <label for="description" class="col-xs-12 col-sm-4 col-form-label text-sm-right">Description</label>
              <div class="col-xs-12 col-sm-8 input-group">
                <textarea 
                class="form-input-custom" 
                id="description" 
                formControlName="description"></textarea>
              </div>
            </div>
            <div *ngIf="record.address" class="row">
              <div class="col-xs-12 col-sm-4 col-form-label text-sm-right">
                <strong>Address:</strong>
              </div>
              <div class="col-xs-12 col-sm-8 input-group col-form-value">
                <p>{{ record.address }}</p>
              </div>
            </div>
            <div class="row">
              <div class="col-xs-12 col-sm-4 col-form-label text-sm-right">
                <strong>Location:</strong>
              </div>
              <div class="col-xs-12 col-sm-8 input-group col-form-value">
                <p>{{ record.city }}, {{ record.province }}</p>
              </div>
            </div>
            
          </div>
        </div>
        
        <div class="row justify-content-center">
          <button 
          class="btn btn-olf-primary" 
          type="submit"
          >Update this Schedule</button>
        </div>
        
      </div>
      
    </div>
    
  </form>
  
</div>

<div class="modal-footer justify-content-center">
  <div class="row">
    <div>
      <a (click)="activeModal.close()">Cancel Changes</a>
    </div>
  </div>
</div>